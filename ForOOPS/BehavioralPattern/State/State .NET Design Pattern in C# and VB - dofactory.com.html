<!DOCTYPE html>
<!-- saved from url=(0049)http://www.dofactory.com/net/state-design-pattern -->
<html style="" class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>State .NET Design Pattern in C# and VB - dofactory.com</title>
    <meta name="keywords" content="State .NET Design Pattern, Microsoft ASP.NET, C#, VB, Azure">
    <meta name="description" content="State .NET Design Pattern C# and VB.  Free source code and UML">
    <link rel="icon" type="image/png" href="http://www.dofactory.com/favicon.ico">

    <link href="./State .NET Design Pattern in C# and VB - dofactory.com_files/prettify.css" rel="stylesheet">
<link href="./State .NET Design Pattern in C# and VB - dofactory.com_files/font-awesome.min.css" rel="stylesheet">
<link href="./State .NET Design Pattern in C# and VB - dofactory.com_files/bootstrap.css" rel="stylesheet">
<link href="./State .NET Design Pattern in C# and VB - dofactory.com_files/app.css" rel="stylesheet">

    <script async="" src="./State .NET Design Pattern in C# and VB - dofactory.com_files/analytics.js.download"></script><script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/modernizr-2.6.2.js.download"></script>
<script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/modernizr-2.7.2.js.download"></script>


    <meta name="copyright" content="(c) Copyright 2018 Dofactory. All rights reserved.">

<style type="text/css">.dropdown-submenu:hover>.dropdown-menu{display:none}</style></head>
<body>

    
<div class="org-darkorange" style="height:70px;">
    <div class="container">
        <div class="row clearfix">
            <div class="pull-left " style="position:relative;height:70px; width:81px;">
                <div style="position:absolute;top:0;left:10px;width:81px;height:90px;background:#ebe4d9;box-shadow: 1px 2px 2px rgba(68,17,0,0.5);">
                    <a href="http://www.dofactory.com/"><img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/logo2.png" style="width:67px;height:67px;margin:10px 0 0 8px;"></a>
                </div>
            </div>
            <div class="pull-left hidden-xs" style="height:70px;">
                <a href="http://www.dofactory.com/">
                    <img style="margin: 20px 0 0 30px; width: 130px; height: 32px;" src="./State .NET Design Pattern in C# and VB - dofactory.com_files/dofactory2.png" alt="">
                </a>
            </div>
            <div class="pull-right">
                <div style="height:36px;margin-top:18px;padding:5px 10px 5px 5px;">
                        <a style="color:#f5f1f1;" class="btn btn-darkbrown" href="http://www.dofactory.com/login.aspx">Login</a><span>&nbsp;&nbsp;&nbsp;</span>
                        <a style="color:#f5f1f1;" class="btn btn-darkbrown" href="http://www.dofactory.com/join.aspx">Join Now</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="gray" style="height:35px;">
    <div class="container">
        <div class="row clearfix">
            <div class="pull-right visible-xs">
                <a href="javascript:void(0);"><img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/hamburger.png" style="margin:8px 8px;" onclick="$(&#39;#small-menus&#39;).slideToggle();"></a>
            </div>

            <div class="pull-left hidden-xs" style="width:87px;height:35px;">

            </div>
            <div class="pull-left hidden-xs ">
                <div>
                    <ul class="nav nav-pills nav-menu-pills" style="padding: 0px 0 0 20px;">
                        <li class="dropdown">
                            <a class="dropdown-toggle disable domenu" data-hover="dropdown" data-target="#" href="http://www.dofactory.com/products/products.aspx">Products</a>
                            <ul class="dropdown-menu" style="background: #aaa091;">
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/products">All Products and Pricing</a></li>
                                <li class="divider"></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/products/net-design-pattern-framework">.NET Design Pattern Framework <sup>TM</sup> 4.5 -- C# Edition</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/products/net-design-pattern-framework">.NET Design Pattern Framework <sup>TM</sup> 4.5 -- VB Edition</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/products/pro-net-design-pattern-framework">PRO .NET Design Pattern Framework <sup>TM</sup> 4.5 -- C# Edition</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/products/pro-net-design-pattern-framework">PRO .NET Design Pattern Framework <sup>TM</sup> 4.5 -- VB Edition</a></li>
                                <li class="divider"></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/products/javascript-jquery-design-pattern-framework">JavaScript + jQuery Pattern Framework <sup>TM</sup></a></li>
                                <li class="divider"></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/products/sql-database-design-pattern-framework">SQL + Database Pattern Framework <sup>TM</sup></a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/products/sql-database-design-pattern-framework">PRO SQL + Database Pattern Framework <sup>TM</sup></a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a class="dropdown-toggle disable domenu" data-hover="dropdown" data-target="#" href="http://www.dofactory.com/customers">Customers</a>
                            <ul class="dropdown-menu" style="background: #aaa091;">
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/customers/">Meet our Customers</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/customers/stories">Success Stories</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a class="dropdown-toggle disable domenu" data-hover="dropdown" data-target="#" href="http://www.dofactory.com/reference">Reference Guides</a>
                            <ul class="dropdown-menu" style="background: #aaa091;">
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/net/design-patterns">.NET Design Patterns</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/javascript/design-patterns">JavaScript Design Patterns</a></li>
                                <li class="divider"></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/tutorial/javascript">JavaScript Tutorial</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/sql/tutorial">SQL Tutorial</a></li>
                                <li class="divider"></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/reference/connection-strings">Connection Strings</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/reference/visual-studio-shortcuts">Visual Studio Shortcuts</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/reference/csharp-coding-standards">C# Coding Standards</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/reference/html-color-codes">HTML Color Codes</a></li>
                                <li class="divider"></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/reference">All References</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a class="dropdown-toggle disable domenu" data-hover="dropdown" data-target="#" href="http://www.dofactory.com/topic/search.aspx">Community</a>
                            <ul class="dropdown-menu" style="background: #aaa091;">
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/topic/search.aspx">Questions</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/topic/add.aspx">Ask Question</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/topic/topics.aspx">Explore</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/tag/tags.aspx">Tags</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/user/users.aspx">Users</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a class="dropdown-toggle disable domenu" data-hover="dropdown" data-target="#" href="http://www.dofactory.com/about">About Us</a>
                            <ul class="dropdown-menu" style="background: #aaa091;">
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/about">Company</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/story">Our Story</a></li>
                                <li class="divider"></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/services">Services</a></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/training">Training</a></li>
                                <li class="divider"></li>
                                <li role="menuitem"><a class="menu-item" href="http://www.dofactory.com/contact">Contact Us</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="visible-xs" style="clear:both;">
    <div id="small-menus" class="gray" style="display:none;">
        <div class="container">
            <div class="row">
                <div class="col-xs-12" style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a onclick="$(&#39;#menus-1&#39;).slideToggle();" class="domenu" href="javascript:void(0);">Products</a></div>
                <div id="menus-1" class="col-xs-12" style="display:none;">
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/products">All Products and Pricing</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/products/net-design-pattern-framework">.NET Design Pattern Framework <sup>TM</sup> 4.5 -- C# Edition</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/products/net-design-pattern-framework">.NET Design Pattern Framework <sup>TM</sup> 4.5 -- VB Edition</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/products/pro-net-design-pattern-framework">PRO .NET Design Pattern Framework <sup>TM</sup> 4.5 -- C# Edition</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/products/pro-net-design-pattern-framework">PRO .NET Design Pattern Framework <sup>TM</sup> 4.5 -- VB Edition</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/products/javascript-jquery-design-pattern-framework">JavaScript + jQuery Pattern Framework <sup>TM</sup></a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/products/sql-database-design-pattern-framework">SQL + Database Pattern Framework <sup>TM</sup></a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/products/sql-database-design-pattern-framework">PRO SQL + Database Pattern Framework <sup>TM</sup></a></div>
                </div>
                <div class="col-xs-12" style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a onclick="$(&#39;#menus-2&#39;).slideToggle();" class="domenu" href="javascript:void(0);">Customers</a></div>
                <div id="menus-2" class="col-xs-12" style="display:none;">
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/customers/">Meet our Customers</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/customers/stories">Success Stories</a></div>
                </div>
                <div class="col-xs-12" style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a onclick="$(&#39;#menus-3&#39;).slideToggle();" class="domenu" href="javascript:void(0);">Reference Guides</a></div>
                <div id="menus-3" class="col-xs-12" style="display:none;">
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/net/design-patterns">.NET Design Patterns</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/javascript/design-patterns">JavaScript Design Patterns</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/tutorial/javascript">JavaScript Tutorial</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/sql/tutorial">SQL Tutorial</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/reference/connection-strings">Connection Strings</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/reference/visual-studio-shortcuts">Visual Studio Shortcuts</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/reference/csharp-coding-standards">C# Coding Standards</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/reference/html-color-codes">HTML Color Codes</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/reference">All References</a></div>
                </div>
                <div class="col-xs-12" style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a onclick="$(&#39;#menus-4&#39;).slideToggle();" class="domenu" href="javascript:void(0);">Community</a></div>
                <div id="menus-4" class="col-xs-12" style="display:none;">
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/topic/search.aspx">Questions</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/topic/add.aspx">Ask Question</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/topic/topics.aspx">Explore</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/tag/tags.aspx">Tags</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/user/users.aspx">Users</a></div>
                </div>
                <div class="col-xs-12" style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a onclick="$(&#39;#menus-5&#39;).slideToggle();" class="domenu" href="javascript:void(0);">About Us</a></div>
                <div id="menus-5" class="col-xs-12" style="display:none;">
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/about">Company</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/story">Our Story</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/services">Services</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/training">Training</a></div>
                    <div style="border-top: 1px solid #ccc;padding:7px 0 7px 20px;"><a class="domenu" href="http://www.dofactory.com/contact">Contact Us</a></div>
                </div>
            </div>
        </div>
    </div>
</div>

    
    <input type="hidden" id="alert-delay">



    

<style>
    ul.xx {
        list-style: none;
        padding-left: 15px;
        margin: 0;
    }

        ul.xx li {
            /*padding-left: 10px;
    text-indent: 0px;*/
            color: #333;
        }

            ul.xx li:before {
                content: "â€¢ ";
                color: #e41e15;
                padding-right: 8px;
            }
</style>

<div style="background:white; ">
    
<div class="container">

    <div class="row">

        <div class="col-xs-12 col-md-9" style="padding:35px 15px 0 15px;">
            <div style="padding:3px 0 30px 0;font-size:13px;">
                <a class="btn btn-default btn-sm btn-back" href="http://www.dofactory.com/net/design-patterns"><i class="back-arrow"></i></a>
                &nbsp;&nbsp;<a href="http://www.dofactory.com/net/design-patterns">back to .NET Design Patterns</a>
                
                
            </div>


            <h1>State</h1>

            <br>
            <div class="clearfix">
                <div class="pull-left">
                    <table>
                        <tbody><tr>
                            <td style="width:200px;padding-left:20px;line-height:22px;">
                                <img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/redarrow.gif">&nbsp;<a class="scrollToTarget" href="http://www.dofactory.com/net/state-design-pattern#def">Definition</a><br>
                                <img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/redarrow.gif">&nbsp;<a class="scrollToTarget" href="http://www.dofactory.com/net/state-design-pattern#uml">UML diagram</a><br>
                                <img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/redarrow.gif">&nbsp;<a class="scrollToTarget" href="http://www.dofactory.com/net/state-design-pattern#par">Participants</a>
                            </td>

                        </tr>
                    </tbody></table>
                </div>
                <div class="pull-left">
                    <table>
                        <tbody><tr>

                            <td style="width:300px;padding-left:20px;">
                                <img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/redarrow.gif">&nbsp;<a class="scrollToTarget" href="http://www.dofactory.com/net/state-design-pattern#str">Structural code in C#</a><br>
                                <img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/redarrow.gif">&nbsp;<a class="scrollToTarget" href="http://www.dofactory.com/net/state-design-pattern#rea">Real-world code in C#</a><br>
                                <img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/redarrow.gif">&nbsp;<a class="scrollToTarget" href="http://www.dofactory.com/net/state-design-pattern#net">.NET Optimized code in C#
                            </a></td>
                        </tr>
                    </tbody></table>
                </div>
            </div>



            <br>
            <a name="def"></a>
            <hr class="hr-orange">
            <br>


            <h3>Definition</h3>

            <div style="width:80%;padding:6px 0;">
                
    Allow an object to alter its behavior when its internal state changes.
    The object will appear to change its class.
  
            </div>

            <br>

            <div class="clearfix">
                <div class="pull-left" style="padding:5px 20px 0 0;">Frequency of use:</div>
                <div class="pull-left"><img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/use_medium.gif"></div>
                <div class="pull-left" style="padding:5px 0px 0 15px;">Medium</div>
            </div>

            <br>
            <br>
            <a name="uml"></a>
            <hr class="hr-orange">
            <br>

            <h3 id="uml-scroll">UML class diagram</h3>
            <br>
            <div style="padding-left:40px;">
                <img class="img-responsive" src="./State .NET Design Pattern in C# and VB - dofactory.com_files/state.gif">
            </div>

            <br>
            <br>
            <a name="par"></a>
            <hr class="hr-orange">
            <br>

            <h3 id="participants-scroll">Participants</h3>
            <br>
            <p>
                &nbsp;&nbsp;&nbsp;&nbsp;The classes and objects participating in this pattern are:
            </p>

            
					<ul>
					<li><font color="#aa0000"><b>Context</b></font>&nbsp;&nbsp;<font color="#007733"><b>(Account)</b></font>
					<ul>
					<li>defines the interface of interest to 
													clients 
					                
					</li><li>maintains an instance of a ConcreteState subclass that defines the current state.</li>
					</ul>
					</li><li><font color="#aa0000"><b>State</b></font>&nbsp;&nbsp;<font color="#007733"><b>(State)</b></font>
					<ul>
					<li>defines an interface for encapsulating the behavior associated with a particular
					state of the Context.</li>
					</ul>
					</li><li><font color="#aa0000"><b>Concrete State</b></font>&nbsp;&nbsp;<font color="#007733"><b>(RedState, SilverState, GoldState)</b></font>
					<ul>
					<li>each subclass implements a behavior associated with a state of Context</li>
					</ul></li>
					</ul>
        

            <br>
            <a name="str"></a>
            <hr class="hr-orange">
            <br>

            <h3>Structural code in C#</h3>
            <br>
            <p>
                
			This <font color="#bb0000">structural</font> code demonstrates the State pattern which allows an object to behave differently
			depending on its internal state. The difference in behavior is
			delegated to objects that represent this state.
        
            </p>
            <div class="div-hscroll">
                <pre class="prettyprint linenums run code-hscroll"><ol class="linenums"><li class="L0"><span class="pln">                 </span></li><li class="L1"><div class="divsource"></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span style="color: blue;"><span class="kwd">using</span></span><span class="pln"> </span><span class="typ">System</span><span class="pun">;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span style="color: blue;"><span class="kwd">namespace</span></span><span class="pln"> </span><span class="typ">DoFactory</span><span class="pun">.</span><span class="typ">GangOfFour</span><span class="pun">.</span><span class="typ">State</span><span class="pun">.</span><span class="typ">Structural</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pun">{</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> MainApp startup class for Structural</span></span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> State Design Pattern.</span></span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">MainApp</span></span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> Entry point into console application.</span></span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">static</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Main</span><span class="pun">()</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Setup context in a state</span></span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Context</span></span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">Context</span></span><span class="pun">(</span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">ConcreteStateA</span></span><span class="pun">());</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Issue requests, which toggles state</span></span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">();</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">();</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">();</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c</span><span class="pun">.</span><span class="typ">Request</span><span class="pun">();</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Wait for user</span></span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">ReadKey</span><span class="pun">();</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> The 'State' abstract class</span></span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">abstract</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">abstract</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Handle</span><span class="pun">(</span><span style="color: #2b91af;"><span class="typ">Context</span></span><span class="pln"> context</span><span class="pun">);</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> A 'ConcreteState' class</span></span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">ConcreteStateA</span></span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Handle</span><span class="pun">(</span><span style="color: #2b91af;"><span class="typ">Context</span></span><span class="pln"> context</span><span class="pun">)</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="pun">.</span><span class="typ">State</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">ConcreteStateB</span></span><span class="pun">();</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> A 'ConcreteState' class</span></span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">ConcreteStateB</span></span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Handle</span><span class="pun">(</span><span style="color: #2b91af;"><span class="typ">Context</span></span><span class="pln"> context</span><span class="pun">)</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context</span><span class="pun">.</span><span class="typ">State</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">ConcreteStateA</span></span><span class="pun">();</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> The 'Context' class</span></span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">Context</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">private</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span><span class="pln"> _state</span><span class="pun">;</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Constructor</span></span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span class="typ">Context</span><span class="pun">(</span><span style="color: #2b91af;"><span class="typ">State</span></span><span class="pln"> state</span><span class="pun">)</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="typ">State</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> state</span><span class="pun">;</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Gets or sets the state</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span><span class="pln"> </span><span class="typ">State</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">get</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">return</span></span><span class="pln"> _state</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">set</span></span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_state </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="pln">value</span></span><span class="pun">;</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">"State: "</span></span><span class="pln"> </span><span class="pun">+</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_state</span><span class="pun">.</span><span class="typ">GetType</span><span class="pun">().</span><span class="typ">Name</span><span class="pun">);</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Request</span><span class="pun">()</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_state</span><span class="pun">.</span><span class="typ">Handle</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">);</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pun">}</span></p></div></li><li class="L2"><span class="pln">&nbsp;</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">        </span></li><li class="L5"><span class="pln">                </span></li></ol></pre>
            </div>

            <br>
            <h5>Output</h5>

            <div class="output">
                
State: ConcreteStateA<br>
State: ConcreteStateB<br>
State: ConcreteStateA<br>
State: ConcreteStateB<br>
State: ConcreteStateA<br>
        
            </div>

            <br>
            <br>
            <a name="rea"></a>
            <hr class="hr-orange">
            <br>

            <h3>Real-world code in C#</h3>
            <br>
            <p>
                
This <font color="#00aa55">real-world</font> code demonstrates the State pattern which allows an Account to behave differently
depending on its balance. The difference in behavior is
delegated to State objects called RedState, SilverState and GoldState. 
These states represent overdrawn accounts, starter accounts, and 
accounts in good standing.
        
            </p>

            <pre class="prettyprint linenums run code-hscroll"><ol class="linenums"><li class="L0"><span class="pln">                 </span></li><li class="L1"><div class="divsource"></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span style="color: blue;"><span class="kwd">using</span></span><span class="pln"> </span><span class="typ">System</span><span class="pun">;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span style="color: blue;"><span class="kwd">namespace</span></span><span class="pln"> </span><span class="typ">DoFactory</span><span class="pun">.</span><span class="typ">GangOfFour</span><span class="pun">.</span><span class="typ">State</span><span class="pun">.</span><span class="typ">RealWorld</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pun">{</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> MainApp startup class for Real-World </span></span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> State Design Pattern.</span></span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">MainApp</span></span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> Entry point into console application.</span></span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">static</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Main</span><span class="pun">()</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Open a new account</span></span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Account</span></span><span class="pln"> account </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">Account</span></span><span class="pun">(</span><span style="color: #a31515;"><span class="str">"Jim Johnson"</span></span><span class="pun">);</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Apply financial transactions</span></span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">Deposit</span><span class="pun">(</span><span class="lit">500.0</span><span class="pun">);</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">Deposit</span><span class="pun">(</span><span class="lit">300.0</span><span class="pun">);</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">Deposit</span><span class="pun">(</span><span class="lit">550.0</span><span class="pun">);</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">PayInterest</span><span class="pun">();</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">Withdraw</span><span class="pun">(</span><span class="lit">2000.00</span><span class="pun">);</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">Withdraw</span><span class="pun">(</span><span class="lit">1100.00</span><span class="pun">);</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Wait for user</span></span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">ReadKey</span><span class="pun">();</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> The 'State' abstract class</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">abstract</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">protected</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">Account</span></span><span class="pln"> account</span><span class="pun">;</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">protected</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> balance</span><span class="pun">;</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">protected</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> interest</span><span class="pun">;</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">protected</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> lowerLimit</span><span class="pun">;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">protected</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> upperLimit</span><span class="pun">;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Properties</span></span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">Account</span></span><span class="pln"> </span><span class="typ">Account</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">get</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">return</span></span><span class="pln"> account</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">set</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> account </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="pln">value</span></span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> </span><span class="typ">Balance</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">get</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">return</span></span><span class="pln"> balance</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">set</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> balance </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="pln">value</span></span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">abstract</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Deposit</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> amount</span><span class="pun">);</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">abstract</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Withdraw</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> amount</span><span class="pun">);</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">abstract</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">PayInterest</span><span class="pun">();</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> A 'ConcreteState' class</span></span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;remarks&gt;</span></span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> Red indicates that account is overdrawn </span></span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/remarks&gt;</span></span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">RedState</span></span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">private</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> _serviceFee</span><span class="pun">;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Constructor</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span class="typ">RedState</span><span class="pun">(</span><span style="color: #2b91af;"><span class="typ">State</span></span><span class="pln"> state</span><span class="pun">)</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="pln">balance </span><span class="pun">=</span><span class="pln"> state</span><span class="pun">.</span><span class="typ">Balance</span><span class="pun">;</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="pln">account </span><span class="pun">=</span><span class="pln"> state</span><span class="pun">.</span><span class="typ">Account</span><span class="pun">;</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Initialize</span><span class="pun">();</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">private</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Initialize</span><span class="pun">()</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Should come from a datasource</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interest </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lowerLimit </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">100.0</span><span class="pun">;</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upperLimit </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_serviceFee </span><span class="pun">=</span><span class="pln"> </span><span class="lit">15.00</span><span class="pun">;</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Deposit</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> amount</span><span class="pun">)</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;balance </span><span class="pun">+=</span><span class="pln"> amount</span><span class="pun">;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">StateChangeCheck</span><span class="pun">();</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Withdraw</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> amount</span><span class="pun">)</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;amount </span><span class="pun">=</span><span class="pln"> amount </span><span class="pun">-</span><span class="pln"> _serviceFee</span><span class="pun">;</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">"No funds available for withdrawal!"</span></span><span class="pun">);</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">PayInterest</span><span class="pun">()</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// No interest is paid</span></span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">private</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">StateChangeCheck</span><span class="pun">()</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">balance </span><span class="pun">&gt;</span><span class="pln"> upperLimit</span><span class="pun">)</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">State</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">SilverState</span></span><span class="pun">(</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">);</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> A 'ConcreteState' class</span></span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;remarks&gt;</span></span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> Silver indicates a non-interest bearing state</span></span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/remarks&gt;</span></span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">SilverState</span></span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Overloaded constructors</span></span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span class="typ">SilverState</span><span class="pun">(</span><span style="color: #2b91af;"><span class="typ">State</span></span><span class="pln"> state</span><span class="pun">)</span><span class="pln"> </span><span class="pun">:</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">(</span><span class="pln">state</span><span class="pun">.</span><span class="typ">Balance</span><span class="pun">,</span><span class="pln"> state</span><span class="pun">.</span><span class="typ">Account</span><span class="pun">)</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span class="typ">SilverState</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> balance</span><span class="pun">,</span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">Account</span></span><span class="pln"> account</span><span class="pun">)</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="pln">balance </span><span class="pun">=</span><span class="pln"> balance</span><span class="pun">;</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="pln">account </span><span class="pun">=</span><span class="pln"> account</span><span class="pun">;</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Initialize</span><span class="pun">();</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">private</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Initialize</span><span class="pun">()</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Should come from a datasource</span></span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interest </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lowerLimit </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upperLimit </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1000.0</span><span class="pun">;</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Deposit</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> amount</span><span class="pun">)</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;balance </span><span class="pun">+=</span><span class="pln"> amount</span><span class="pun">;</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">StateChangeCheck</span><span class="pun">();</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Withdraw</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> amount</span><span class="pun">)</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;balance </span><span class="pun">-=</span><span class="pln"> amount</span><span class="pun">;</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">StateChangeCheck</span><span class="pun">();</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">PayInterest</span><span class="pun">()</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;balance </span><span class="pun">+=</span><span class="pln"> interest </span><span class="pun">*</span><span class="pln"> balance</span><span class="pun">;</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">StateChangeCheck</span><span class="pun">();</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">private</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">StateChangeCheck</span><span class="pun">()</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">balance </span><span class="pun">&lt;</span><span class="pln"> lowerLimit</span><span class="pun">)</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">State</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">RedState</span></span><span class="pun">(</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">);</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">else</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">balance </span><span class="pun">&gt;</span><span class="pln"> upperLimit</span><span class="pun">)</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">State</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">GoldState</span></span><span class="pun">(</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">);</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> A 'ConcreteState' class</span></span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;remarks&gt;</span></span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> Gold indicates an interest bearing state</span></span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/remarks&gt;</span></span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">GoldState</span></span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Overloaded constructors</span></span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span class="typ">GoldState</span><span class="pun">(</span><span style="color: #2b91af;"><span class="typ">State</span></span><span class="pln"> state</span><span class="pun">)</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">:</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">(</span><span class="pln">state</span><span class="pun">.</span><span class="typ">Balance</span><span class="pun">,</span><span class="pln"> state</span><span class="pun">.</span><span class="typ">Account</span><span class="pun">)</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span class="typ">GoldState</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> balance</span><span class="pun">,</span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">Account</span></span><span class="pln"> account</span><span class="pun">)</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="pln">balance </span><span class="pun">=</span><span class="pln"> balance</span><span class="pun">;</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="pln">account </span><span class="pun">=</span><span class="pln"> account</span><span class="pun">;</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">Initialize</span><span class="pun">();</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">private</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Initialize</span><span class="pun">()</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Should come from a database</span></span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interest </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.05</span><span class="pun">;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lowerLimit </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1000.0</span><span class="pun">;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upperLimit </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10000000.0</span><span class="pun">;</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Deposit</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> amount</span><span class="pun">)</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;balance </span><span class="pun">+=</span><span class="pln"> amount</span><span class="pun">;</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">StateChangeCheck</span><span class="pun">();</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Withdraw</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> amount</span><span class="pun">)</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;balance </span><span class="pun">-=</span><span class="pln"> amount</span><span class="pun">;</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">StateChangeCheck</span><span class="pun">();</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">override</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">PayInterest</span><span class="pun">()</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;balance </span><span class="pun">+=</span><span class="pln"> interest </span><span class="pun">*</span><span class="pln"> balance</span><span class="pun">;</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="typ">StateChangeCheck</span><span class="pun">();</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">private</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">StateChangeCheck</span><span class="pun">()</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">balance </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">)</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">State</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">RedState</span></span><span class="pun">(</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">);</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">else</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">if</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">balance </span><span class="pun">&lt;</span><span class="pln"> lowerLimit</span><span class="pun">)</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;account</span><span class="pun">.</span><span class="typ">State</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">SilverState</span></span><span class="pun">(</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">);</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;summary&gt;</span></span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> The 'Context' class</span></span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: gray;"><span class="com">///</span></span><span style="color: green;"><span class="com"> </span></span><span style="color: gray;"><span class="com">&lt;/summary&gt;</span></span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">class</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">Account</span></span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">private</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span><span class="pln"> _state</span><span class="pun">;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">private</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">string</span></span><span class="pln"> _owner</span><span class="pun">;</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Constructor</span></span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span class="typ">Account</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">string</span></span><span class="pln"> owner</span><span class="pun">)</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// New accounts are 'Silver' by default</span></span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="pln">_owner </span><span class="pun">=</span><span class="pln"> owner</span><span class="pun">;</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="pln">_state </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">new</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">SilverState</span></span><span class="pun">(</span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">);</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: green;"><span class="com">// Properties</span></span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> </span><span class="typ">Balance</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">get</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">return</span></span><span class="pln"> _state</span><span class="pun">.</span><span class="typ">Balance</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: #2b91af;"><span class="typ">State</span></span><span class="pln"> </span><span class="typ">State</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">get</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">return</span></span><span class="pln"> _state</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">set</span></span><span class="pln"> </span><span class="pun">{</span><span class="pln"> _state </span><span class="pun">=</span><span class="pln"> </span><span style="color: blue;"><span class="pln">value</span></span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Deposit</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> amount</span><span class="pun">)</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_state</span><span class="pun">.</span><span class="typ">Deposit</span><span class="pun">(</span><span class="pln">amount</span><span class="pun">);</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">"Deposited {0:C} --- "</span></span><span class="pun">,</span><span class="pln"> amount</span><span class="pun">);</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">" Balance = {0:C}"</span></span><span class="pun">,</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="typ">Balance</span><span class="pun">);</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">" Status&nbsp;= {0}"</span></span><span class="pun">,</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="typ">State</span><span class="pun">.</span><span class="typ">GetType</span><span class="pun">().</span><span class="typ">Name</span><span class="pun">);</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">""</span></span><span class="pun">);</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">Withdraw</span><span class="pun">(</span><span style="color: blue;"><span class="kwd">double</span></span><span class="pln"> amount</span><span class="pun">)</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_state</span><span class="pun">.</span><span class="typ">Withdraw</span><span class="pun">(</span><span class="pln">amount</span><span class="pun">);</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">"Withdrew {0:C} --- "</span></span><span class="pun">,</span><span class="pln"> amount</span><span class="pun">);</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">" Balance = {0:C}"</span></span><span class="pun">,</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="typ">Balance</span><span class="pun">);</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">" Status&nbsp;= {0}\n"</span></span><span class="pun">,</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="typ">State</span><span class="pun">.</span><span class="typ">GetType</span><span class="pun">().</span><span class="typ">Name</span><span class="pun">);</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;</span></p></div></li><li class="L5"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">public</span></span><span class="pln"> </span><span style="color: blue;"><span class="kwd">void</span></span><span class="pln"> </span><span class="typ">PayInterest</span><span class="pun">()</span></p></div></li><li class="L6"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">{</span></p></div></li><li class="L7"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_state</span><span class="pun">.</span><span class="typ">PayInterest</span><span class="pun">();</span></p></div></li><li class="L8"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">"Interest Paid --- "</span></span><span class="pun">);</span></p></div></li><li class="L9"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">" Balance = {0:C}"</span></span><span class="pun">,</span><span class="pln"> </span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="typ">Balance</span><span class="pun">);</span></p></div></li><li class="L0"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #2b91af;"><span class="typ">Console</span></span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span style="color: #a31515;"><span class="str">" Status&nbsp;= {0}\n"</span></span><span class="pun">,</span></p></div></li><li class="L1"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: blue;"><span class="kwd">this</span></span><span class="pun">.</span><span class="typ">State</span><span class="pun">.</span><span class="typ">GetType</span><span class="pun">().</span><span class="typ">Name</span><span class="pun">);</span></p></div></li><li class="L2"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L3"><div class="divsource"><p style="margin: 0px;"><span class="pln">&nbsp;&nbsp;</span><span class="pun">}</span></p></div></li><li class="L4"><div class="divsource"><p style="margin: 0px;"><span class="pun">}</span></p></div></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="pln">        </span></li><li class="L7"><span class="pln">            </span></li></ol></pre>

            <br>
            <h5>Output</h5>

            <div class="output">
                
Deposited $500.00 ---<br>
&nbsp;Balance = $500.00<br>
&nbsp;Status  = SilverState<br>
<br>
<br>
Deposited $300.00 ---<br>
&nbsp;Balance = $800.00<br>
&nbsp;Status  = SilverState<br>
<br>
<br>
Deposited $550.00 ---<br>
&nbsp;Balance = $1,350.00<br>
&nbsp;Status  = GoldState<br>
<br>
<br>
Interest Paid ---<br>
&nbsp;Balance = $1,417.50<br>
&nbsp;Status  = GoldState<br>
<br>
Withdrew $2,000.00 ---<br>
&nbsp;Balance = ($582.50)<br>
&nbsp;Status  = RedState<br>
<br>
No funds available for withdrawal!<br>
Withdrew $1,100.00 ---<br>
&nbsp;Balance = ($582.50)<br>
&nbsp;Status  = RedState<br>
        
            </div>

            <br>
            <br>
            <a name="net"></a>
            <hr class="hr-orange">
            <br>

            <h3>.NET Optimized code in C#</h3>
            <br>
            <p>
                
     The <font color="#0044aa">.NET optimized</font> code demonstrates the 
     same real-world situation as above but uses modern, built-in .NET features,
     such as, generics, reflection, object initializers, automatic properties, etc.
        
                    <span>
                        You can find an example on our <a href="http://www.dofactory.com/net/singleton-design-pattern#net">Singleton</a> pattern page. <br><br>
                        All other patterns (and much more) are available in our <b>.NET Design Pattern Framework 4.5.</b>
                    </span>

            </p>

                <br>
                <div style="padding:60px 30px 70px 0;background:#f7f7f9;border: 1px solid #e1e1e8;">
                    <p style="padding-left:35px;padding-right:10px;">
                        Not only does the <b>.NET Design Pattern Framework 4.5</b> cover GOF and Enterprise patterns, it also includes
                        .NET pattern architectures that reduce the code you need to write by up to <span style="color:#e41e15">75%</span>.
                        This unique package will change your .NET lifestyle -- for only $79. &nbsp;Here's what is included:
                    </p>
                    <br>

                    <br>
                    <div class="row">
                        <div class="col-xs-12 col-md-6" style="text-align:center;">
                            <a href="http://www.dofactory.com/products/net-design-pattern-framework">
                                <img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/2boxes-transparent.png" border="0" style="padding-left:20px;">
                            </a>
                            <br>
                            
                                <a href="http://www.dofactory.com/products/net-design-pattern-framework"><b>Two editions: C# and VB.NET</b></a>
                                <br><br>
                                <div class="ctr">
                                    <a class="btn btn-md btn-order" href="http://www.dofactory.com/products/net-design-pattern-framework">Learn More</a>
                                </div>
                            




                        </div>
                        <div class="col-xs-12 col-md-6" style="padding:10px 0 0 0; color:#e41e15;">
                            <ul class="xx" style="padding-left:40px;">
                                <li>69 gang-of-four pattern projects</li>
                                <li>46 head-first pattern projects</li>
                                <li>Fowler's enterprise patterns</li>
                                <li>Multi-tier patterns</li>
                                <li>Convention over configuration</li>
                                <li>Active Record and CQRS patterns</li>
                                <li>Repository and Unit-of-Work patterns</li>
                                <li>MVC, MVP, &amp; MVVM patterns</li>
                                <li>REST patterns with Web API</li>
                                <li>Spark<sup>TM</sup> Rapid App Dev (RAD) platform!</li>
                                <li>Art Shop MVC Reference Application</li>
                                <li>100% pure source code</li>
                            </ul>
                        </div>
                    </div>
                </div>

            <br>
            <br>
        </div>

        <div class="col-xs-12 col-md-3 hidden-xs" style="padding-top:30px;background:white;">

            <div class="ctr">

                <a href="http://www.dofactory.com/products/net-design-pattern-framework">

                    <img src="./State .NET Design Pattern in C# and VB - dofactory.com_files/dotnet_cs_4.5_box 190x277 cropped noshade transparent.png" style="width:119px;">
                    <br><span style="color:#444;">Discover the secrets of<br>expert .NET developers</span><br>
                </a>
            </div>
            <br><br>
            

<table class="table table-condensed ctr" style="width:100%;">
    <tbody><tr>
        <td class="table-heading table-heading-simple">Creational Patterns</td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/abstract-factory-design-pattern">Abstract Factory</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/builder-design-pattern">Builder</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/factory-method-design-pattern">Factory Method</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/prototype-design-pattern">Prototype</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/singleton-design-pattern">Singleton</a></td>
    </tr>
</tbody></table>

<br>

<table class="table table-condensed" style="width:100%;">
    <tbody><tr>
        <td class="table-heading table-heading-simple">Structural Patterns</td>
    </tr>
    <tr>
        <td style="width:30%;border:0;"><a class="side-menu" href="http://www.dofactory.com/net/adapter-design-pattern">Adapter</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/bridge-design-pattern">Bridge</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/composite-design-pattern">Composite</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/decorator-design-pattern">Decorator</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/facade-design-pattern">Facade</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/flyweight-design-pattern">Flyweight</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/proxy-design-pattern">Proxy</a></td>
    </tr>
</tbody></table>

<br>

<table class="table table-condensed" style="width:100%;">
    <tbody><tr>
        <td class="table-heading table-heading-simple">Behavioral Patterns</td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/chain-of-responsibility-design-pattern">Chain of Resp.</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/command-design-pattern">Command</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/interpreter-design-pattern">Interpreter</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/iterator-design-pattern">Iterator</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/mediator-design-pattern">Mediator</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/memento-design-pattern">Memento</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/observer-design-pattern">Observer</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/state-design-pattern">State</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/strategy-design-pattern">Strategy</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/template-method-design-pattern">Template Method</a></td>
    </tr>
    <tr>
        <td><a class="side-menu" href="http://www.dofactory.com/net/visitor-design-pattern">Visitor</a></td>
    </tr>
</tbody></table>

        </div>
    </div>
</div>
</div>
<br><br>
<br><br>
<br><br>




    
    <a id="scrollLeft" href="http://www.dofactory.com/net/state-design-pattern#" class="scrollToTop" style="left: 30px;"><i class="fa fa-arrow-up"></i></a>
    <a id="scrollRight" href="http://www.dofactory.com/net/state-design-pattern#" class="scrollToTop" style="right: 30px;"><i class="fa fa-arrow-up"></i></a>

    <div class="footer-bar">
    <div class="container">
        <div class="row" style="padding-top: 40px;">
            <div class="col-sm-2 col-xs-12">
                <div style="padding-left: 20px; color: #fff; font-weight:bold;">Company</div>
                <ul class="footer-list">
                    <li><a href="http://www.dofactory.com/about">About Us</a></li>
                    <li><a href="http://www.dofactory.com/story">Our Story</a></li>
                    <li><a href="http://www.dofactory.com/services">Services</a></li>
                    <li><a href="http://www.dofactory.com/training">Training</a></li>
                    <li><a href="http://www.dofactory.com/contact">Contact Us</a></li>

                    <li style="padding-top: 15px;"><a href="http://www.dofactory.com/privacy">Privacy</a></li>
                    <li><a href="http://www.dofactory.com/terms">Terms</a></li>
                    <li><a href="http://www.dofactory.com/licensing">Licensing</a></li>
                </ul>
            </div>

            <div class="col-sm-3 col-xs-12">
                <div style="padding-left: 20px; color: #fff; font-weight:bold;">Customers</div>
                <ul class="footer-list">
                    <li><a href="http://www.dofactory.com/customers">Our Customers</a></li>
                    <li><a href="http://www.dofactory.com/customers/stories">Customer Stories</a></li>
                </ul>
                <div style="padding: 15px 0 0 20px; color: #fff; font-weight:bold;">Community</div>
                <ul class="footer-list">
                    <li><a href="http://www.dofactory.com/topic/search.aspx">Questions</a></li>
                    <li><a href="http://www.dofactory.com/topic/add.aspx">Ask Question</a></li>
                    <li><a href="http://www.dofactory.com/topic/topics.aspx">Explore</a></li>
                    <li><a href="http://www.dofactory.com/tag/tags.aspx">Tags</a></li>
                    <li><a href="http://www.dofactory.com/user/users.aspx">Users</a></li>
                </ul>
            </div>
            <div class="col-sm-3 col-xs-12">
                <div style="padding-left: 20px; color: #fff; font-weight:bold;">Reference Guides</div>
                <ul class="footer-list">
                    <li><a href="http://www.dofactory.com/net/design-patterns">.NET Design Patterns</a></li>
                    <li><a href="http://www.dofactory.com/javascript/design-patterns">JavaScript Design Patterns</a></li>
                    <li style="padding-top: 15px;"><a href="http://www.dofactory.com/tutorial/javascript">JavaScript Tutorial</a></li>
                    <li><a href="http://www.dofactory.com/sql/tutorial">SQL Tutorial</a></li>
                    <li style="padding-top: 15px;"><a href="http://www.dofactory.com/reference/connection-strings">Connection Strings</a></li>
                    <li><a href="http://www.dofactory.com/reference/visual-studio-shortcuts">Visual Studio Shortcuts</a></li>
                    <li><a href="http://www.dofactory.com/reference/csharp-coding-standards">C# Coding Standards</a></li>
                    <li><a href="http://www.dofactory.com/reference/html-color-codes">HTML Colors</a></li>
                </ul>
            </div>

            <div class="col-sm-4 col-xs-12">
                <div style="padding-left: 20px; color: #fff; font-weight:bold;">Our Products</div>
                <div class="footer-products" style="margin-top: 10px; padding-bottom: 18px;">
                    <ul class="footer-list">
                        <li><a href="http://www.dofactory.com/products/net-design-pattern-framework">.NET Design Pattern Framework</a> <sup style="color: #999;">TM</sup></li>
                        <li><a href="http://www.dofactory.com/products/pro-net-design-pattern-framework">PRO .NET Design Pattern Framework</a> <sup style="color: #999;">TM</sup></li>
                        <li style="padding-top: 17px;"><a href="http://www.dofactory.com/products/javascript-jquery-design-pattern-framework">JavaScript + jQuery Pattern Framework</a> <sup style="color: #999;">TM</sup></li>
                        <li><a href="http://www.dofactory.com/products/sql-database-design-pattern-framework">SQL + Database Pattern Framework</a> <sup style="color: #999;">TM</sup></li>

                        <li style="padding-top: 17px;"><a href="http://www.dofactory.com/products">Products and Pricing</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

</div>
<div class="footer-bar">
    <div class="container">
        <hr class="hr-darkbrown">
        <div class="row" style="">
            <div class="col-xs-12">
                <div class="footer">Â© 2018 - Data &amp; Object Factory, LLC. &nbsp;dofactory.com. &nbsp;All rights reserved.</div>
            </div>
        </div>
    </div>
</div>


    <script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/jquery-2.1.1.js.download"></script>
<script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/jquery.validate.js.download"></script>
<script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/jquery.validate.unobtrusive.js.download"></script>

    <script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/bootstrap.js.download"></script>
<script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/twitter-bootstrap-hover-dropdown.min.js.download"></script>
<script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/respond.js.download"></script>
<script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/json2.js.download"></script>
<script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/prettify.js.download"></script>
<script src="./State .NET Design Pattern in C# and VB - dofactory.com_files/app.js.download"></script>


    
    <script type="text/javascript">
        $(function () {
            Dofactory.Utils.ScrollToTop.start();

            Dofactory.Utils.ScrollToTarget.start();

        });
    </script>


    <script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-1223200-3', 'auto');
    ga('send', 'pageview');

    </script>


<div class="nav-collapse collapse" style="visibility:hidden;position:fixed" id="cwspear-is-awesome">.</div></body></html>